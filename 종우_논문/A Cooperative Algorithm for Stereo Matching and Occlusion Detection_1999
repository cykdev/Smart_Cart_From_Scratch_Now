- 요약
시차맵(disparity map)을 얻기위한 방법
전제조건 : 고유성, 연속성
- 고유성 : 픽셀당 고유한 값을 가짐
- 연속성 : 거의 모든 곳에서 연속적임
문제점 : 매끄러운 디스 패리티 맵<> 세부 사항놓침, 세부 맵 <> 노이즈
시도된 해결방안 : 창 뒤틀기, 적응형 윈도우
- 창 뒤틀기: [23] D. J. Panton, "A flexible approach to digital stereo mapping,"
 Photogram.Eng.Remote Sensing, vol. 44, no. 12, pp. 1499-1512, 1978. > 단점 : 폐색 경계에서의 어려움을 다루지 않음
- 적응형 윈도우: [12]T. Kanade and M. Okutomi, "A stereo matching algorithm 
with an adaptive window: Theory and experiment," IEEE Transactions on Pattern Analysis and Machine Intelligence, vol. 16, no. 9, pp. 920-932, 1994.> 단점 : 비쌈


This paper presents a stereo algorithm for obtaining disparity maps with 
occlusion explicitly detected. To produce smooth and detailed disparity maps, two assumptionsthat were originally proposed by Marr and Poggio are adopted: uniqueness andcontinuity. That is, the disparity maps have a unique value per pixel and are continuousalmost everywhere. These assumptions are enforced within a three-dimensional array ofmatch values in disparity space. Each match value corresponds to a pixel in an imageand a disparity relative to another image. An iterative algorithm updates the matchvalues by diffusing support among neighboring values and inhibiting others along similarlines of sight. By applying the uniqueness assumption, occluded regions can beexplicitly identified.To demonstrate the effectiveness of the algorithm we present the processingresults from synthetic and real image pairs, including ones with ground-truth values forquantitative comparison with other method이 논문은 오 클루 전이 명시 적으로 감지 된 시차 맵을 얻기위한 스테레오 
알고리즘을 제시합니다. 부드럽고 상세한 시차 맵을 생성하기 위해, 원래 Marr과 Poggio가 제안한 두 가지 가정, 즉 고유성과 연속성이 채택되었습니다. 즉, 디스 패리티 맵은 픽셀 당 고유 한 값을 가지며 거의 모든 곳에서 연속적입니다. 이러한 가정은 시차 공간에서 3 차원 배열의 일치 값 내에서 시행됩니다. 각각의 매칭 값은 이미지의 픽셀 및 다른 이미지에 대한 디스 패리티에 대응한다. 반복 알고리즘은 인접 값 간의 지원을 분산시키고 유사한 가시선을 따라 다른 값을 억제함으로써 일치 값을 업데이트합니다. 고유성 가정을 적용하여 폐색 된 영역을 명시 적으로 식별 할 수 있습니다. 알고리즘의 효과를 입증하기 위해 다른 방법과의 양적 비교를위한 실제 값을 가진 합성 및 실제 이미지 쌍의 처리 결과를 제시합니다.
1. Introduction
Stereo vision can produce a dense disparity map. The resultant disparity 
mapshould be smooth and detailed; continuous and even surfaces should produce a region ofsmooth disparity values with their boundary precisely delineated, while small surface elements should be detected as separately distinguishable regions. Though obviouslydesirable, it is not easy for a stereo algorithm to satisfy these two requirements at the same time. Algorithms that can produce a smooth disparity map tend to miss the detailsand those that can produce a detailed map tend to be noisy.스테레오 비전은 조밀 한 시차 맵을 생성 할 수 있습니다. 결과 시차 맵은 부드럽고 
상세해야합니다. 연속적이고 균일 한 표면은 경계가 정확하게 묘사 된 매끄러운 시차 값의 영역을 생성해야하지만 작은 표면 요소는 개별적으로 구별 가능한 영역으로 감지되어야합니다. 분명히 바람직하지만 스테레오 알고리즘이이 두 가지 요구 사항을 동시에 충족시키는 것은 쉽지 않습니다. 매끄러운 디스 패리티 맵을 생성 할 수있는 알고리즘은 세부 사항을 놓치는 경향이 있고 세부 맵을 생성 할 수있는 알고리즘은 노이즈가 많은 경향이 있습니다.
For area-based stereo methods [13], [18], [29], [7], [2], [12], which 
matchneighboring pixel values within a window between images, the selection of anappropriate window size is critical to achieving a smooth and detailed disparity map.The optimal choice of window size depends on the local amount of variation in textureand disparity [20], [2], [6], [21], [12]. In general, a smaller window is desirable to avoidunwanted smoothing. In areas of low texture, however, a larger window is needed sothat the window contains intensity variation enough to achieve reliable matching. On theother hand, when the disparity varies within the window (i.e., the corresponding surfaceis not fronto-parallel), intensity values within the window may not correspond due toprojective distortion. In addition to unwanted smoothing in the resultant disparity map,this fact creates the phenomena of so-called fattening and shrinkage of a surface. Thatis, a surface with high intensity variation extends into neighboring less-textured surfacesacross occluding boundaries.이미지 사이의 창 내에서 인접 픽셀 값을 일치시키는 영역 기반 스테레오 방법 [13], 
[18], [29], [7], [2], [12]의 경우 적절한 창 크기를 선택하는 것이 중요합니다. 창 크기의 최적 선택은 텍스처와 시차의 로컬 변화량에 따라 달라집니다 [20], [2], [6], [21], [12]. 일반적으로 원치 않는 스무딩을 피하려면 더 작은 창이 바람직합니다. 그러나 텍스처가 낮은 영역에서는 더 큰 창이 필요하므로 창에 안정적인 일치를 달성하기에 충분한 강도 변화가 포함됩니다. 한편, 디스 패리티가 윈도우 내에서 변할 때 (즉, 대응하는 표면이 전-평행이 아닌 경우), 윈도우 내의 강도 값은 투사 왜곡으로 인해 대응하지 않을 수있다. 결과 디스 패리티 맵에서 원치 않는 스무딩 외에도이 사실은 소위 비육 및 표면 수축 현상을 발생시킵니다. 즉, 강도 변화가 큰 표면은 경계를 가로 질러 주변의 덜 텍스처링 된 표면으로 연장된다.
Many attempts have been made to remedy these serious problems in windowbased 
stereo methods. One earlier method is to warp the window according to theestimated orientation of the surface to reduce the effect of projective distortion [23]. Amore recent and sophisticated method is an adaptive window method [12]. The windowsize and shape are iteratively changed based on the local variation of the intensity andcurrent depth estimates. While these methods showed improved results, the first methoddoes not deal with the difficulty at the occluding boundary, and the second method isextremely computationally expensive. A typical method to deal with occlusion is bidirectional matching. For example, in the paper by Fua [6] two disparity maps arecreated relative to each image: one for left to right and another for right to left. Matcheswhich are consistent between the two disparity maps are kept. Inconsistent matchescreate holes, which are filled in by using interpolation.창 기반 스테레오 방식에서 이러한 심각한 문제를 해결하기위한 많은 
시도가있었습니다. 초기의 한 가지 방법은 투영 왜곡의 영향을 줄이기 위해 표면의 예상 방향에 따라 창을 뒤틀는 것입니다 [23]. 보다 최근의 정교한 방법은 적응 형 윈도우 방법이다 [12]. 창 크기와 모양은 강도 및 현재 깊이 추정치의 로컬 변화에 따라 반복적으로 변경됩니다. 이들 방법은 개선 된 결과를 나타내지 만, 첫 번째 방법은 폐색 경계에서의 어려움을 다루지 않으며, 두 번째 방법은 계산 비용이 매우 비싸다. 폐색을 처리하는 일반적인 방법은 양방향 일치입니다. 예를 들어, Fua [6]의 논문에서, 두 개의 시차 맵이 각각의 이미지에 대해 생성된다 : 하나는 왼쪽에서 오른쪽으로, 다른 하나는 오른쪽에서 왼쪽으로. 두 디스 패리티 맵간에 일치하는 일치가 유지됩니다. 일치하지 않는 일치는 보간을 사용하여 채워지는 구멍을 만듭니다.
The fundamental problem of these stereo methods is that they make decisionsvery 
locally; they do not take into account the fact that a match at one point restrictsothers due to global constraints resulting from stereo geometry and scene consistency.One constraint commonly used by feature-based stereo methods is edge consistency [22],[14]; that is, all matches along a continuous edge must be consistent. While constrainingmatches using edge consistency improves upon local feature-based methods [1], [26],they produce only sparse depth maps.이러한 스테레오 방식의 근본적인 문제는 그들이 로컬에서 의사 결정을 내리는 
것입니다. 한 지점에서의 일치가 스테레오 지오메트리 및 장면 일관성으로 인한 전역 제약으로 인해 다른 점을 제한한다는 사실을 고려하지 않습니다. 기능 기반 스테레오 방법에서 일반적으로 사용되는 한 가지 제약은 에지 일관성입니다 [22], [14]; 즉, 연속 에지를 따르는 모든 일치는 일관성이 있어야합니다. 에지 일관성을 사용하는 구속 조건 일치는 로컬 피쳐 기반 방법 [1], [26]에 따라 향상되지만 희소 깊이 맵만 생성합니다.
The work by Marr and Poggio [15], [16] is one of the first to apply 
globalconstraints or assumptions while producing a dense depth map. Two assumptions aboutstereo were stated explicitly: uniqueness and continuity of a disparity map. That is, thedisparity maps have unique values and are continuous almost everywhere. They deviseda simple cooperative algorithm for diffusing support among disparity estimates to take2advantage of the two assumptions. They demonstrated the algorithm on syntheticrandom-dot images. The application of similar methods to real stereo images has beenleft largely unexplored probably due to memory and processing constraints at that time.Recently, Scharstein and Szelski [27] proposed a Bayesian model of stereo matching. Increating continuity within the disparity map, support among disparity estimates is nonlinearly diffused. The derived method has results similar to that of adaptive windowmethods [12]. Several other methods [3], [8], [11] have attempted to find occlusions anddisparity values simultaneously using the ordering constraint along with dynamicprogramming techniquesMarr and Poggio [15], [16]의 연구는 밀도가 높은 깊이 맵을 생성하면서 세계 
제약이나 가정을 적용한 최초의 작업 중 하나입니다. 입체에 대한 두 가지 가정이 명시되었다 : 시차지도의 독창성과 연속성. 즉, 시차지도는 고유 한 값을 가지며 거의 모든 곳에서 연속적입니다. 그들은 두 가지 가정의 장점을 취하기 위해 시차 추정치 사이의 지원을 확산시키기위한 간단한 협력 알고리즘을 고안했다. 그들은 합성 랜덤 도트 이미지에 대한 알고리즘을 시연했습니다. 실제 스테레오 이미지에 유사한 방법을 적용하는 것은 아마도 당시 메모리와 처리 제약으로 인해 크게 탐구되지 않은 채 남아있다. 최근 Scharstein과 Szelski는 스테레오 매칭의 베이지안 모델을 제안했다. 시차 맵 내에서 연속성을 생성하면 시차 추정 간의 지원이 비선형 적으로 확산됩니다. 도출 된 방법은 적응 형 윈도우 방법과 유사한 결과를 가지고있다 [12]. 다른 몇 가지 방법 [3], [8], [11]은 동적 프로그래밍 기술과 함께 순서 제약 조건을 사용하여 폐색 및 시차 값을 동시에 찾으려고 시도했습니다.
In this paper we present a cooperative stereo algorithm using global 
constraints tofind a dense depth map. The uniqueness and continuity assumptions by Marr and Poggioare adopted. A three-dimensional array of match values is constructed in disparity space;each element of the array corresponds to a pixel in the reference image and a disparity,relative to another image. An update function of match values is constructed for use withreal images. The update function generates continuous and unique values by diffusingsupport among neighboring match values and by inhibiting values along similar lines ofsight. Initial match values, possibly obtained by pixel-wise correlation, are used to retaindetails during each iteration. After the match values have converged, occluded areas areexplicitly identified.이 논문에서 우리는 조밀 한 깊이 맵을 찾기 위해 전역 제약을 사용하는 협동 
스테레오 알고리즘을 제시한다. Marr 및 Poggio의 고유성 및 연속성 가정이 채택되었습니다. 매칭 값의 3 차원 어레이는 시차 공간에 구성되고; 어레이의 각 요소는 참조 이미지의 픽셀 및 다른 이미지에 대한 시차에 대응한다. 일치 값의 업데이트 기능은 실제 이미지와 함께 사용하도록 구성됩니다. 업데이트 기능은 인접 일치 값 사이의 지원을 확산시키고 유사한 가시선을 따라 값을 억제하여 지속적이고 고유 한 값을 생성합니다. 픽셀 단위 상관 관계로 얻을 수있는 초기 일치 값은 각 반복 동안 세부 정보를 유지하는 데 사용됩니다. 일치 값이 수렴 된 후에는 차단 된 영역이 명시 적으로 식별됩니다.
To demonstrate the effectiveness of the algorithm we provide experimental 
datafrom several synthetic and real scenes. The resulting disparity maps are smooth anddetailed with occlusions detected. Disparity maps using real stereo images with groundtruth disparities (University of Tsukuba’s Multiview Image Database) are used forquantitative comparison with other methods. A comparison with the multi-baselinemethod and the multi-baseline plus adaptive window method is also made.알고리즘의 효과를 입증하기 위해 여러 합성 및 실제 장면의 실험 데이터를 
제공합니다. 결과 디스 패리티 맵은 매끄럽고 교합이 감지되어 상세합니다. 실제 차이를 가진 실제 스테레오 이미지를 사용하는 디스 패리티 맵 (Tsukuba 대학의 멀티 뷰 이미지 데이터베이스)은 다른 방법과의 정량적 비교에 사용됩니다. 다중 기준선 방법 및 다중 기준선 + 적응 창 방법과의 비교도 수행됩니다.
2. A Cooperative Stereo Algorithm
Marr and Poggio [15], [16] presented two basic assumptions for a stereo 
visionalgorithm. The first assumption states that at most a single unique match exists for eachpixel; that is, each pixel corresponds to a single surface point. When using intensityvalues for matching this uniqueness assumption may be violated if surfaces are notopaque. A classic example is a pixel receiving contribution from both a fish and a fishbowl. The second assumption states that disparity values are generally continuous, i.e.smooth within a local neighborhood. In most scenes the continuity assumption is validsince surfaces are relatively smooth and discontinuities occur only at object boundaries.Marr과 Poggio [15], [16]는 스테레오 비전 알고리즘에 대한 두 가지 기본 가정을 
제시했다. 첫 번째 가정은 각 픽셀마다 최대 하나의 고유 한 일치가 존재한다는 것입니다. 즉, 각 픽셀은 단일 표면 점에 해당합니다. 일치하는 강도 값을 사용할 때 표면이 불투명하지 않은 경우이 고유성 가정을 위반할 수 있습니다. 전형적인 예는 물고기와 어항 모두로부터 기여를받는 픽셀입니다. 두 번째 가정은 시차 값이 일반적으로 연속적이라고 말하며, 즉 주변 지역 내에서 부드럽습니다. 대부분의 장면에서 연속성 가정은 표면이 비교적 매끄럽고 불연속성이 객체 경계에서만 발생하므로 유효합니다.
We propose a cooperative approach using disparity space to utilize these 
twoassumptions. The 3D disparity space has dimensions row r, column c and disparity d.This parameterization is different from 3D volumetric methods [5], [17], [27], [28] thatuse x, y, and z world coordinates as dimensions. Assuming (without loss of generality)that the images have been rectified, each element (r, c, d) of the disparity space projectsto the pixel (r, c) in the left image and to the pixel (r, c+d) in the right image, asillustrated in figure 1. Within each element, the estimated value of a match between thepixels is held.우리는이 두 가지 가정을 활용하기 위해 시차 공간을 사용하는 협력 적 접근법을 
제안한다. 3D 시차 공간의 치수는 행 r, 열 c 및 시차 d를 갖습니다.이 매개 변수화는 x, y 및 z 세계 좌표를 치수로 사용하는 3D 체적 법 [5], [17], [27], [28]과 다릅니다. 이미지가 수정되었다고 가정 (일반성이 손실되지 않음) 할 때, 시차 공간의 각 요소 (r, c, d)는 왼쪽 이미지의 픽셀 (r, c)과 픽셀 (r, c + d)로 투영됩니다. 각 요소 내에서, 픽셀들 사이의 매칭의 추정값이 유지된다.
To obtain a smooth and detailed disparity map an iterative update function is 
usedto refine the match values. Let Ln(r, c, d) denote the match value assigned to element (r,c, d) at iteration n. The initial values L0(r, c, d) may be computed from images using:부드럽고 상세한 디스 패리티 맵을 얻기 위해 반복 업데이트 기능을 사용하여 일치 
값을 세분화합니다. Ln (r, c, d)가 반복 n에서 요소 (r, c, d)에 지정된 일치 값을 나타냅니다. 초기 값 L0 (r, c, d)는 다음을 사용하여 이미지로부터 계산 될 수있다 :
where δ is an image similarity function such as squared differences or 
normalizedcorrelation. The image similarity function should produce high values for correctmatches, however the opposite does not need to be true, i.e. many incorrect matchesmight also have high initial match values.여기서 δ는 제곱 차이 또는 정규화 된 상관 관계와 같은 이미지 유사성 함수입니다. 
이미지 유사성 함수는 정확한 일치를 위해 높은 값을 생성해야하지만 그 반대 일 필요는 없습니다. 즉, 많은 잘못된 일치가 초기 일치 값을 가질 수도 있습니다.
The continuity assumption implies neighboring elements have consistent 
matchvalues. We propose iteratively averaging their values to increase consistency. Whenaveraging neighboring match values we need a concept of local support. The localsupport area for an element determines which and to what extent neighboring elementsshould contribute to averaging. Ideally, the local support area should include all and onlythose neighboring elements that correspond to a correct match if the current elementcorresponds to a correct match. Since the correct match is not known beforehand, someassumption is required on deciding the extent of the local support. Marr and Poggio, forexample, used elements having equal disparity values for averaging - that is, their localsupport area spans a 2D area (d=const.) in the r-c-d space. This 2D local support areacorresponds to the fronto-parallel plane assumption. However, sloping and more generalsurfaces require using a 3D area in the disparity space for local support. Many 3D localsupport assumptions have been proposed [9], [25], [26], [12]; Kanade and Okutomi [12]present a detailed analysis of the relationship and differences among them. For simplicitywe use a box-shaped 3D local support area with a fixed width, height and depth, but adifferent local support area could be used as well.연속성 가정은 인접 요소가 일관된 일치 값을 가짐을 의미합니다. 일관성을 높이기 
위해 반복적으로 가치를 평균화 할 것을 제안합니다. 인접 일치 값을 평균 할 때는 로컬 지원 개념이 필요합니다. 요소의 로컬 지원 영역은 주변 요소가 평균화에 어느 정도 또는 어느 정도 기여해야하는지 결정합니다. 로컬 지원 영역에 현재 요소가 올바르게 일치하는 경우 올바르게 일치하는 모든 인접 요소 만 포함하는 것이 이상적입니다. 사전에 올바른 일치를 알 수 없으므로 로컬 지원 범위를 결정할 때 약간의 가정이 필요합니다. 예를 들어 Marr과 Poggio는 평균화를 위해 동일한 시차 값을 갖는 요소를 사용했습니다. 즉, 로컬 지원 영역이 r-c-d 공간에서 2D 영역 (d = const.)에 걸쳐 있습니다. 이 2D 로컬 지원 영역은 전-평면 평면 가정에 해당합니다. 그러나 경 사진 공간과보다 일반적인 표면은 시차 공간에서 3D 영역을 사용하여 현지 지원을 받아야합니다. 많은 3D 지역 지원 가정이 제안되었다 [9], [25], [26], [12]; Kanade와 Okutomi [12]는 이들의 관계와 차이점에 대한 자세한 분석을 제시합니다. 단순화를 위해 너비, 높이 및 깊이가 고정 된 상자 모양의 3D 로컬지지 영역을 사용하지만 다른 로컬지지 영역도 사용할 수 있습니다.
Let us define Sn(r, c, d) to be the amount of local support for (r, c, d), i.e. 
the sumof all match values within a 3D local support area Φ.Sn (r, c, d)을 (r, c, d)에 대한 로컬 지원의 양, 즉 3D 로컬 지원 영역 Φ 내의 
모든 일치 값의 합으로 정의합니다.
The uniqueness assumption implies there can exist only one match within a set 
ofelements that project to the same pixel in an image. As illustrated in figure 1 by darksquares, let Ψ(r, c, d) denote the set of elements which overlap element (r, c, d) whenprojected to an image. That is, each element in Ψ(r, c, d) projects to pixel (r, c) in the leftimage or to pixel (r, c+d) in the right image. With the uniqueness assumption, Ψ(r, c, d)represents the inhibition area to a match at (r, c, d). 고유성 가정은 이미지의 동일한 픽셀로 투영되는 요소 집합 내에 하나의 일치 항목 
만 존재할 수 있음을 의미합니다. 그림 1에서 어두운 사각형으로 표시된 것처럼 Ψ (r, c, d)는 이미지에 투사 될 때 요소 (r, c, d)와 겹치는 요소 세트를 나타냅니다. 즉, Ψ (r, c, d)의 각 요소는 왼쪽 이미지의 픽셀 (r, c) 또는 오른쪽 이미지의 픽셀 (r, c + d)로 투영됩니다. 고유성 가정에서 Ψ (r, c, d)는 억제 영역을 (r, c, d)에서 일치하는 것으로 나타냅니다.
Let Rn(r, c, d) denote the amount of inhibition Sn(r, c, d) receives from 
theelements in Ψ(r, c, d). Many possible inhibition functions are conceivable; we havechosen the following for its computational simplicityRn (r, c, d)는 Ψ (r, c, d)의 원소들로부터 Sn (r, c, d)가받는 억제 량을 
나타낸다고하자. 많은 가능한 억제 기능이 생각 될 수있다; 우리는 계산의 단순성을 위해 다음을 선택했습니다.
The match value is inhibited by the sum of the match values within Ψ(r, c, d). 
Theexponent α controls the amount of inhibition per iteration. To guarantee a single elementwithin Ψ(r, c, d) will converge to 1, α must be greater than 1. The inhibition constant α,should be chosen to allow elements within the local support Φ to affect the match valuesfor several iterations while also maintaining a reasonable convergence rate.일치 값은 Ψ (r, c, d) 내의 일치 값의 합에 의해 금지됩니다. 지수 α는 반복 당 
억제 량을 제어합니다. Ψ (r, c, d) 내의 단일 요소가 1로 수렴하도록 보장하려면 α가 1보다 커야합니다. 억제 상수 α는 로컬 지원 Φ 내의 요소가 여러 반복에 대한 일치 값에 영향을 미치도록 선택해야합니다. 합리적인 수렴 률 유지.
Summing the match values within a local support in equation (2) can result 
inoversmoothing and thus a loss of details. We propose restricting the match valuesrelative to the image similarity between pixel (r, c) in the left image and pixel (r, c + d) inthe right image. In this way, we allow only elements that project to pixels with similarintensities to have high match values (though pixels with similar intensity do notnecessarily end up with high match values.) The initial match values L0, which arecomputed using a measure of intensity similarity, can be used for restricting the currentmatch values Ln. Let Tn(r, c, d) denote the value Rn(r, c, d) restricted by L0(r, c, d):식 (2)의 로컬 지원 내에서 일치 값을 합하면 과도하게 매끄럽게되어 세부 정보가 
손실 될 수 있습니다. 왼쪽 이미지의 픽셀 (r, c)과 오른쪽 이미지의 픽셀 (r, c + d) 간의 이미지 유사성에 상대적인 일치 값을 제한 할 것을 제안합니다. 이러한 방식으로 유사한 강도를 가진 픽셀로 투사하는 요소 만 높은 일치 값을 갖도록 허용합니다 (강도가 비슷한 픽셀은 반드시 높은 일치 값으로 끝나지 않지만). 강도 유사성의 측정 값을 사용하여 계산 된 초기 일치 값 L0, 전류 일치 값 Ln을 제한하는 데 사용할 수 있습니다. Tn (r, c, d)가 L0 (r, c, d)에 의해 제한되는 값 Rn (r, c, d)을 나타내도록하십시오.
Marr and Poggio [15], [16] used discrete match values and a 2D local support 
forΦ, possibly due to memory and processing constraints. Their results using syntheticrandom-dot images with step function disparities were excellent. Since real stereo imagepairs have multiple intensity levels and sloping disparities, continuous match values and a3D local support for Φ are needed. Marr and Poggio did not address the steps needed toapply equation (6) to real stereo image pairs [24]. Equation (5) possesses two mainadvantages over (6), in addition to supporting the use of real images. First, the values in(5) are restricted by the initial match values to maintain details. In (6) the initial valuesare added to the current values to bias the results towards values which were initiallyhigh. Since (6) does not restrict values that were initially low, oversmoothing and a lossof details may still occur. Second, the inhibition function in (5) is simpler so a costlysigmoid function does not need to be computed; for their experiments Marr and Poggioactually used a threshold function instead of a sigmoid function due to processingconstraints.Marr과 Poggio [15], [16]는 메모리 및 처리 제약으로 인해 불연속 일치 값과 Φ에 
대한 2D 로컬 지원을 사용했습니다. 스텝 함수 시차가있는 합성 랜덤 도트 이미지를 사용한 결과는 훌륭했습니다. 실제 스테레오 이미지 쌍은 여러 강도 레벨과 경 사진 시차를 가지므로 연속 일치 값과 Φ에 대한 3D 로컬 지원이 필요합니다. Marr과 Poggio는 식 (6)을 실제 스테레오 이미지 쌍에 적용하는 데 필요한 단계를 다루지 않았다 [24]. 식 (5)는 실제 이미지의 사용을 지원할뿐만 아니라 (6)보다 두 가지 주요 장점을 가지고있다. 먼저 (5)의 값은 세부 사항을 유지하기 위해 초기 일치 값으로 제한됩니다. (6)에서 초기 값은 현재 값에 더 해져서 초기에 높은 값으로 결과를 바이어스한다. (6)은 초기에 낮은 값을 제한하지 않기 때문에 과도하게 매끄럽게하고 세부 정보가 손실 될 수 있습니다. 둘째, (5)의 억제 기능이 더 간단하므로 비용이 많이 드는 시그 모이 드 기능을 계산할 필요가 없다. 그들의 실험을 위해 Marr과 Poggioactually는 제약 조건으로 인해 S 자형 함수 대신 임계 값 함수를 사용했습니다.
3. Explicit Detection of Occluded Areas

Occlusion is a critical and difficult phenomena to be dealt with by 
stereoalgorithms. With any reasonably complex scene there exists occluded pixels that have nocorrect match. Unfortunately most stereo algorithms do not consider this important caseexplicitly, and therefore they produce gross errors in areas of occlusion or find disparityvalues similar to the foreground or background. Several methods have attempted toexplicitly detect occlusions, including methods using intensity edges [10], multiplecameras with camera masking [19] and bi-directional (left-to-right and right-to-left)matching [6]. Recently, several stereo algorithms, Belhumeur and Mumford [3], Geiger,Ladendorf and Yuille [8] and Intille and Bobick [11] have proposed finding occlusionsand matches simultaneously to help in identifying disparity discontinuities. By imposingan additional assumption called the ordering constraint these methods have been able tosuccessfully detect occlusions. The ordering constraint states that if an object a is left ofan object b in the left image then object a will also appear to the left of object b in theright image. While powerful, the ordering constraint assumption is not always true, andis violated when pole-like objects are in the foreground.폐색은 입체 알고리즘으로 다루어야 할 비판적이고 어려운 현상입니다. 합리적으로 
복잡한 장면에는 정확하게 일치하지 않는 막힌 픽셀이 있습니다. 불행히도 대부분의 스테레오 알고리즘은이 중요한 경우를 명시 적으로 고려하지 않기 때문에 폐색 영역에서 심각한 오류가 발생하거나 전경 또는 배경과 유사한 시차 값을 찾습니다. 강도 에지를 사용하는 방법 [10], 카메라 마스킹 [19] 및 양방향 (왼쪽에서 오른쪽으로, 오른쪽에서 왼쪽으로) 일치하는 [6]을 사용하는 방법을 포함하여 여러 가지 방법으로 폐색을 명시 적으로 감지하려고 시도했습니다. 최근 Belhumeur와 Mumford [3], Geiger, Ladendorf, Yuille [8], Intille and Bobick [11] 등 여러 스테레오 알고리즘이 시차 불연속을 식별하는 데 도움이되는 폐색과 일치를 동시에 제안했습니다. 순서 제한이라는 추가 가정을 적용함으로써 이러한 방법은 폐색을 성공적으로 감지 할 수있었습니다. 순서 제약 조건은 객체 a가 왼쪽 이미지에서 객체 b의 왼쪽에 있으면 객체 a도 오른쪽 이미지에서 객체 b의 왼쪽에 나타납니다. 강력하지만 순서 제약 조건 가정이 항상 참인 것은 아니며 극 같은 객체가 포 그라운드에있을 때 위반됩니다.
In our algorithm we try to identify occlusions by examining the magnitude of 
the converged match values in conjunction with the uniqueness constraint. Since no correct match exists in areas of occlusion, all match values corresponding to occluded pixels should be small. Consider a pixel p in the left image, whose correct corresponding pointis not visible in the right image. Referring to figure 2, for an element v of the array along6the line of sight of p, there are two cases that occur for its projection q on the right image.The first case, depicted in figure 2(a), is when q’s correct corresponding point is visible inthe left image. Then there exists an element v’ which corresponds to the correct matchbetween a pixel p’ in the left image and q. Since elements v and v’ both project to pixel q,their match values will inhibit each other due to the uniqueness assumption. Generally,the correct element v’ will have a higher match value, causing the value for element v todecrease. The second case, depicted in figure 2(b), is a more difficult case. This occurswhen q’s true corresponding element is occluded in the left image. Since neither p nor qhas a correct match, the value of a match between p and q will receive no inhibition fromelements corresponding to correct matches, and false matches could have high values. Insuch cases additional assumptions must be made to correctly find occluded areas. Theordering constraint could be one such assumption that may label these correctly asoccluded. However, a tradeoff exists; enforcing the ordering constraint could in turn leadto other pixels being mislabeled as occluded. Due to this tradeoff we have chosen not toenforce the ordering constraint.알고리즘에서는 고유성 제약 조건과 함께 수렴 된 일치 값의 크기를 검사하여 폐색을 
식별하려고합니다. 폐색 영역에는 정확한 일치가 없기 때문에 폐색 된 픽셀에 해당하는 모든 일치 값은 작아야합니다. 왼쪽 이미지의 픽셀 p를 고려하십시오. 오른쪽 이미지에는 해당 점이 보이지 않습니다. 도 2를 참조하면, p의 가시선을 따라 배열의 요소 v에 대해, 오른쪽 이미지에서 투영 q에 대해 두 가지 경우가 발생하는데,도 2 (a)에 도시 된 첫 번째 경우는 q가 정확한 경우이다. 왼쪽 이미지에 해당 지점이 표시됩니다. 그런 다음 왼쪽 이미지의 픽셀 p '와 q 사이의 정확한 일치에 해당하는 요소 v'가 있습니다. 요소 v와 v '는 모두 픽셀 q에 투영되므로, 고유성 가정으로 인해 일치 값이 서로를 방해합니다. 일반적으로 올바른 요소 v '는 더 높은 일치 값을 가지므로 요소 v의 값이 감소합니다. 그림 2 (b)에 묘사 된 두 번째 경우는 더 어려운 경우이다. 이것은 q의 해당 요소가 왼쪽 이미지에서 가려져있을 때 발생합니다. p와 q가 모두 정확하게 일치하지 않기 때문에 p와 q 사이의 일치 값은 올바른 일치에 해당하는 요소로부터 제한을받지 않으며, 잘못된 일치는 높은 값을 가질 수 있습니다. 이 경우 폐색 된 영역을 올바르게 찾으려면 추가 가정을해야합니다. 순서 제약은 이러한 것들이 올바르게 할당되었다는 가정 중 하나 일 수 있습니다. 그러나 트레이드 오프가 존재합니다. 순서 제한을 적용하면 다른 픽셀이 오 클루 징 된 것으로 잘못 레이블 될 수 있습니다. 이러한 트레이드 오프로 인해 우리는 주문 제한을 강화하지 않기로 선택했습니다.
In general, provided mutually occluded areas within the disparity range do 
nothave similar intensities, all match values corresponding to occluded pixels will be small.After the match values have converged, we can determine if a pixel is occluded byfinding the element with the greatest match value along its line of sight. If the maximummatch value is below a threshold the pixel is labeled as occluded.일반적으로 디스 패리티 범위 내에서 서로 차단 된 영역의 강도가 비슷하지 않으면 
차단 된 픽셀에 해당하는 모든 일치 값이 작습니다. 일치 값이 수렴 된 후 일치 값이 가장 큰 요소를 찾아 픽셀이 폐색되었는지 확인할 수 있습니다. 그 시선을 따라. 최대 일치 값이 임계 값보다 낮 으면 픽셀에 폐색으로 레이블이 지정됩니다.
4. Summary of Algorithm

The cooperative algorithm is now summarized as follows:
1. Prepare a 3D array, (r, c, d): (r, c) for each pixel in the reference image 
and d for the range of disparity.2. Set initial match values L0 using a function of image intensities, such as 
normalized correlation or squared differences.3. Iteratively update match values Ln using (5), until the match values 
converge.4. For each pixel (r, c), find the element (r, c, d) with the maximum match 
value.5. If the maximum match value is higher than a threshold, output the disparity 
d, otherwise classify it as occluded.The running time for steps 1 through 5 is on the order of N2*D*I, where N2 is 
the size of the image, D is the range of disparities, and I is the number of iterations. The amount of memory needed is on the order of N2*D. In practice the algorithm takes about 8 seconds per iteration with 256x256 images on a SGI Indigo 2ex.협력 알고리즘은 이제 다음과 같이 요약됩니다.
1. 참조 이미지의 각 픽셀에 대해 3D 어레이 (r, c, d) : (r, c)를 준비하고 시차 
범위에 대해 d를 준비합니다.2. 정규화 된 상관 또는 제곱 차이와 같은 이미지 강도의 함수를 사용하여 초기 일치 
값 L0을 설정합니다.3. 일치 값이 수렴 될 때까지 (5)를 사용하여 일치 값 Ln을 반복해서 업데이트합니다.
4. 각 픽셀 (r, c)에 대해 최대 일치 값을 가진 요소 (r, c, d)를 찾으십시오.
5. 최대 일치 값이 임계 값보다 높은 경우 시차 d를 출력하고 그렇지 않으면이를 
폐색으로 분류하십시오.1-5 단계의 실행 시간은 N2 * D * I의 순서이며 N2는 이미지의 크기이고 D는 디스 
패리티 범위이며 I는 반복 횟수입니다. 필요한 메모리 양은 N2 * D 정도입니다. 실제로이 알고리즘은 SGI Indigo 2ex에서 256x256 이미지로 반복 당 약 8 초가 걸립니다.
5. Experimental Results

To demonstrate the effectiveness of our algorithm we have applied it to 
severalreal and synthetic images. The input images are rectified. Initial match values are set byusing the squared difference of image intensities for each pixel. The squared differencevalues were linearly adjusted so that their values distribute between 0 and 1. Thethreshold for detecting occlusions was set constant for all image pairs at 0.005.알고리즘의 효과를 보여주기 위해 여러 실제 이미지와 합성 이미지에 적용했습니다. 
입력 이미지가 수정됩니다. 초기 일치 값은 각 픽셀의 이미지 강도의 제곱 차를 사용하여 설정됩니다. 차의 제곱 값은 그 값이 0과 1 사이에 분포하도록 선형으로 조정되었습니다. 폐색을 감지하기위한 임계 값은 모든 이미지 쌍에 대해 0.005로 일정하게 설정되었습니다.
5.1 Random Dot Stereogram
Figure 3(a) and (b) present a synthetic random dot image pair with random noise.
A sinusoidal repetitive pattern is also inserted for part of the image to make it moredifficult. The disparity map shown in figure 3(c) has step-function as well as curveddisparities. The algorithm was run with three different sizes of local support (3x3x3,5x5x3 and 7x7x3.) Table 1 shows the performance summary after 10 iterations.Approximately 99% of the disparity values were found correctly for each size of localsupport area. Pixels labeled occluded in the true disparity map are not used in computingthe disparity errors. A disparity is labeled as correct if it is within one pixel of the correctdisparity. It is worth noting that at the beginning of iteration one, only 35% of themaximum initial matches L0 that were computed using a local image intensity similaritymeasure were correct. As observed in Figure 3(d), the disparity errors mainly occurwithin the repetitive texture and at disparity discontinuities. We found, however, that ifenough iterations are completed, incorrect disparities due to repetitive textures arecompletely removed [30]. Of the detected occlusions, 81% to 97% were indeedocclusions and 58% to 80% of the true occlusions were found depending on local supportarea size. Occlusions created by the three vertical bars, which violate the ordering8constraint, were found correctly. The inhibition constant α controls the convergenceproperties of the algorithm. Figure 4 illustrates the convergence properties for differentvalues of α. Higher values for the inhibition constant lead to slightly faster convergencewith a minimal loss of accuracy.그림 3 (a)와 (b)는 랜덤 노이즈가있는 합성 랜덤 도트 이미지 페어를 보여 주며, 
이미지의 일부에 대해 사인파 반복 패턴이 삽입되어 이미지를 더욱 어렵게 만듭니다. 도 3 (c)에 도시 된 디스 패리티 맵은 만곡 된 디스 패리티뿐만 아니라 스텝 기능을 갖는다. 이 알고리즘은 3 가지 다른 크기의 로컬 지원 (3x3x3,5x5x3 및 7x7x3)으로 실행되었습니다. 표 1은 10 회 반복 후의 성능 요약을 보여줍니다. 실제 디스 패리티 맵에서 폐색 된 레이블이있는 픽셀은 디스 패리티 오류를 계산하는 데 사용되지 않습니다. 디스 패리티는 정확한 디스 패리티의 한 픽셀 내에있는 경우 올바른 것으로 표시됩니다. 반복이 시작될 때 로컬 이미지 강도 유사성 측정을 사용하여 계산 된 최대 초기 일치 L0의 35 %만이 정확하다는 점에 주목할 가치가 있습니다. 도 3 (d)에서 관찰 된 바와 같이, 시차 오차는 주로 반복 텍스처 및 시차 불연속에서 발생한다. 그러나 충분한 반복이 완료되면 반복적 인 텍스처로 인한 부정확 한 차이가 완전히 제거됩니다 [30]. 감지 된 폐색 중 81 % ~ 97 %는 비 폐쇄였으며 실제 폐색의 58 % ~ 80 %는 국소지지 면적 크기에 따라 발견되었습니다. 순서 제약 조건을 위반하는 세 개의 수직 막대로 생성 된 폐색이 올바르게 발견되었습니다. 억제 상수 α는 알고리즘의 수렴 속성을 제어합니다. 그림 4는 다른 α 값에 대한 수렴 특성을 보여줍니다. 억제 상수 값이 높을수록 정확도 손실을 최소화하면서 수렴 속도가 약간 빨라집니다.
5.2 U. of Tsukuba Data with Ground Truth
The University of Tsukuba’s Multiview Image Database provides real stereoimage 
pairs with ground truth data. The ground-truth data allows us to do a quantitativecomparison between our method and others. Figure 5(a), (b) and (c) shows a stereoimage pair from the University of Tsukuba data with a ground-truth disparity map. Inthis stereo pair, 59% of the maximum initial match values L0 were correct. We tested ouralgorithm using three different sizes of local support (3x3x3, 5x5x3, and 7x7x3) with theinhibition constant set to 2. After 15 iterations, as shown in Table 2, at least 97% of thedisparities were found correctly over the range of local support area sizes. The best resultis a 1.98% disparity error for a 5x5x3 local support area. Most errors occurred aroundless-textured object boundaries. Approximately 60% of the occlusions detected werecorrect with 50% of the true occlusions found.쓰쿠바 대학의 멀티 뷰 이미지 데이터베이스는 실제 사실과 쌍을 이루는 실제 
스테레오 이미지를 제공합니다. 실제 데이터를 통해 우리의 방법과 다른 방법을 정량적으로 비교할 수 있습니다. 그림 5 (a), (b) 및 (c)는 츠쿠바 대학 데이터의지면 진실 디스 패리티 맵과 함께 스테레오 이미지 쌍을 보여줍니다. 이 스테레오 쌍에서 최대 초기 일치 값 L0의 59 %가 정확했습니다. 우리는 억제 상수를 2로 설정 한 3 가지 다른 크기의 로컬 지원 (3x3x3, 5x5x3 및 7x7x3)을 사용하여 알고리즘을 테스트했습니다. 표 2에 표시된대로 15 회 반복 한 후 표 2에서와 같이, 불일치의 97 % 이상이 로컬 지원 범위에서 올바르게 발견되었습니다. 면적 크기. 최상의 결과는 5x5x3 로컬 지원 영역에 대해 1.98 % 디스 패리티 오류입니다. 대부분의 오류는 텍스처가없는 객체 경계에서 발생했습니다. 감지 된 폐색의 약 60 %가 발견 된 실제 폐색의 50 %로 수정되었습니다.We allowed the match values to completely converge using 80 iterations. 
Theresulting disparity map is shown in Figure 5(d). Table 3 shows a detailed analysis ofcorrect and erroneous matches in the obtained disparity map. Of the 84,003 pixelslabeled non-occluded in the ground truth data, 82,597 pixels had the correct disparity,1,121 had incorrect disparities and 285 were labeled as occluded using our algorithm. Ofthe 1,902 pixels labeled occluded in the ground truth data, our algorithm labeled 860correctly as occluded and 1,042 incorrectly as non-occluded. Ignoring the occlusionlabeling, of the 84,003 pixels labeled non-occluded in the ground truth data 1.44% hadincorrect disparity values of greater than one pixel using our algorithm. Table 4 shows acomparison of various stereo algorithms on the U. of Tsukuba data. The GPM-MRFalgorithm [4] had approximately twice as many errors. The results of more standardalgorithms also provided by [4], had an error rate of 9.0% for LOG filtered L1 and 10.0%for normalized correlation. The University of Tsukuba group has obtained the bestresults so far using multiple images (more than two) and camera masking [19] with errorsof 0.3% for 25 images and 0.9% for 9 images. The error results for the camera maskingmethod are evaluated on fewer pixels since the chance of a pixel being occludedincreases with the number of camera angles used.일치 값을 80 회 반복하여 완전히 수렴하도록 허용했습니다. 격차 시차지도가도 5 (d)
에 도시되어있다. 표 3은 획득 된 시차지도에서 정확하고 잘못된 일치에 대한 자세한 분석을 보여줍니다. 지상 진실 데이터에서 폐색되지 않은 84,003 개의 픽셀 중에서 82,597 개의 픽셀은 정확한 시차를 가졌으며, 1,121은 잘못된 시차를 가졌으며 285는 알고리즘을 사용하여 폐색 된 것으로 표시되었습니다. 지면 진실 데이터에서 폐색 된 1,902 개의 픽셀 중, 우리 알고리즘은 860은 폐색 된 것으로 올바르게 표시되고 1,042는 비 폐쇄 된 것으로 잘못 표시됩니다. 지면 진실 데이터에 폐색되지 않은 84,003 개의 픽셀 중 폐색 라벨링을 무시하면 1.44 %가 알고리즘을 사용하여 1 픽셀보다 큰 불일치 값을가집니다. 표 4는 U. of Tsukuba 데이터에 대한 다양한 스테레오 알고리즘의 비교를 보여줍니다. GPM-MRFalgorithm [4]은 약 2 배 많은 오류를 가지고있었습니다. [4]에서 제공 한 더 많은 표준 알고리즘의 결과는 LOG 필터링 된 L1의 경우 9.0 %, 정규화 된 상관의 경우 10.0 %의 오류율을 나타 냈습니다. 쓰쿠바 대학 (University of Tsukuba) 그룹은 25 개 이미지의 경우 0.3 %, 9 개 이미지의 경우 0.9 %의 오차로 여러 이미지 (2 개 이상)와 카메라 마스킹 [19]을 사용하여 최상의 결과를 얻었습니다. 카메라 마스킹 방법의 오류 결과는 사용 된 카메라 각도의 수에 따라 픽셀이 가려 질 가능성이 있기 때문에 더 적은 픽셀에서 평가됩니다.
5.3 CMU Coal Mine Scene
Figure 6 presents the stereo image pair of the “Coal Mine” scene and 
theprocessing results. For comparison, the multi-baseline method [21] using sums ofsquared differences and the adaptive window method [12] are applied to the image set.The multi-baseline result (Figure 6 (f)) that uses three input images is clearly the noisiestof the three. The result of the adaptive window approach (Figure 6 (g)) also using threeimages is smooth in general, but a few errors remain. Especially, the small buildingattached to the tower in the center of the image is not well delineated and the slanted roofin the upper corner of the scene is overly smoothed. For our approach we usednormalized correlation within a 3x3 window to create the initial match values instead ofsquared differences, since intensity values varied between the input images. The results9(Figure 6(e)) are smooth while recovering several details at the same time. The slantedroof of the lower building and the water tower on the rooftop are clearly visible. Depthdiscontinuities around the small building attached to the tower are preserved. 15iterations were used and the inhibition constant was set to 2.그림 6은“석탄광”장면의 스테레오 이미지 쌍과 처리 결과를 보여줍니다. 비교를 
위해, 제곱 차의 합을 사용하는 다중 기준선 방법 [21]과 적응 형 창 방법 [12]이 이미지 세트에 적용됩니다. 세 개의 입력 이미지를 사용하는 다중 기준선 결과 (그림 6 (f))는 세 가지 중 소음. 3 개의 이미지를 사용한 적응 형 창 접근 방식 (그림 6 (g))의 결과는 일반적으로 매끄럽지 만 몇 가지 오류가 남아 있습니다. 특히, 이미지 중앙의 타워에 부착 된 작은 건물은 잘 묘사되어 있지 않으며 장면의 상단 모서리에있는 경사 지붕이 지나치게 매끄 럽습니다. 우리의 접근 방식에서는 3x3 창 내에서 정규화 된 상관 관계를 사용하여 제곱 차이 대신 초기 일치 값을 만들었습니다. 강도 값은 입력 이미지마다 달라졌 기 때문입니다. 여러 세부 사항을 동시에 복구하면서 결과 9 (그림 6 (e))는 매끄 럽습니다. 낮은 건물의 경사면과 옥상의 급수탑이 선명하게 보입니다. 타워에 연결된 작은 건물 주변의 깊이 불연속이 유지됩니다. 15 회 반복을 사용하고 억제 상수를 2로 설정 하였다.
6. Conclusion
One of the important contributions of Marr and Poggio [15], [16], in addition 
tothe cooperative algorithm itself, is that they insisted the explicitly stated assumptions bedirectly reflected in their algorithm. Many other stereo algorithms in contrast do not stateassumptions explicitly or the relationship between the assumptions and the algorithm isunclear. In following Marr and Poggio’s positive example we have attempted to directlyreflect the continuity and uniqueness assumptions in our algorithm. To find a continuoussurface, support is diffused among neighboring match values within a 3D area of thedisparity space. A unique match is found by inhibition between match values alongsimilar lines of sight. Additionally, after the values have converged, occlusions can beexplicitly identified by examining match value magnitudes.협동 알고리즘 자체 이외에도 Marr and Poggio [15], [16]의 중요한 공헌 중 하나는 
명시 적으로 명시된 가정이 알고리즘에 직접 반영된다고 주장했다는 것입니다. 대조적으로 많은 다른 스테레오 알고리즘은 명시 적으로 가정 가정을하지 않거나 가정과 알고리즘 사이의 관계가 불분명합니다. Marr 및 Poggio의 긍정적 인 예를 따르면 알고리즘의 연속성 및 고유성 가정을 직접 반영하려고 시도했습니다. 연속적인 표면을 찾기 위해, 시차 공간의 3D 영역 내에서 인접 매치 값들 사이에지지가 확산된다. 고유 한 일치는 유사한 가시선을 따라 일치 값을 억제함으로써 발견됩니다. 또한 값이 수렴 된 후 일치 값 크기를 검사하여 폐색을 명시 적으로 식별 할 수 있습니다.
As demonstrated by using several synthetic and real image examples, the 
resultingdisparity map is smooth and detailed with occlusions detected. The quantitative resultsobtained using the ground truth data supplied by University of Tsukuba demonstrates theimprovement of our algorithm over other current algorithms.여러 합성 및 실제 이미지 예제를 사용하여 시연 한 것처럼 결과 디스 패리티 맵은 
매끄럽고 세부적인 오 클루 전이 감지됩니다. University of Tsukuba에서 제공 한 근거 정보를 사용하여 얻은 정량 결과는 다른 현재 알고리즘보다 알고리즘이 개선되었음을 보여줍니다.
